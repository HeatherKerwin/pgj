<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>xi</title>
<link rel="stylesheet" type="text/css" href="../css/skin-1.css" />
<link rel="stylesheet" href="../commons/styles/reset.css" />
<!-- 最新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="../commons/styles/bootstrap.css"/>
<link rel="stylesheet"  href="../commons/styles/bootstrap-datetimepicker.min.css"/>
<link rel="stylesheet" href="../commons/styles/default.css" />
<link rel="stylesheet" type="text/css" href="../css/notice/notice.css">
<link rel="Stylesheet" type="text/css" href="../css/notice/notice-dialog.css" />
</head>
<body>
	<table width="100%"  border="0" cellpadding="0" cellspacing="0">
	  <!-- 头部开始 -->
	  <tr>
	    <td width="17" valign="top" background="../images/sctg/mail_left_bg.gif"><img src="../images/sctg/left_top_right.gif" width="17" height="29" /></td>
	    <td valign="top" background="../images/sctg/content_bg.gif"><table width="100%" height="58" border="0" cellpadding="0" cellspacing="0" >
	        <tr>
	          <td height="31" colspan="2"><div class="title">贴现提示信息 </div></td>
	        </tr>
	      </table></td>
	    <td width="16" valign="top" background="../images/sctg/mail_right_bg.gif"><img src="../images/sctg/nav_right_bg.gif" width="16" height="29" /></td>
	  </tr>
	 <tr>
	 	<td width="17" valign="top" background="../images/sctg/mail_left_bg.gif"><img src="../images/sctg/left_top_right.gif" width="17" height="29" /></td>
	 	<td valign="top">
	 		<span>年份：</span>
	 		<span>
	 			<input class="laydate-icon" id="startYear" style="width: 185px;" name="start" readonly="readonly" onclick="laydate({elem:'#startYear',istime:true,istoday:true,max:$('#end').val(),format: 'YYYY'});" value="">
	 		</span>&nbsp;
	 		<span>
	 			<input style="width: 60px;" id="searchYear" class="btn" type="button" value="搜索" />
	 		</span>
	 	</td>
	 	 <td width="16" valign="top" background="../images/sctg/mail_right_bg.gif"><img src="../images/sctg/nav_right_bg.gif" width="16" height="29" /></td>
	</tr>
	<!-- 中间部分开始 -->
  	<tr> 
	    <!--第一行左边框-->
	    <td valign="middle" background="../images/sctg/mail_left_bg.gif">&nbsp;</td>
	    
	    <!--第一行中间内容-->
	    <td valign="top" bgcolor="#F7F8F9">
	    <table width="1380px;" border="0" align="center" cellpadding="0" cellspacing="0">
	        <tr>
				<!--s2-->
				<div class="s2">
					<div class="s2_1">
						<div class="s2_11 fl">节日</div>
						<div class="s2_12 fl">提示语</div>
						<div class="s2_13 fl">弹出框</div>
						<div class="s2_14 fl">备注</div>
					</div>
					<div class="s2_2" id="FESTIVAL_YD">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_YD">元旦</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_CJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_CJ">春节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_QMJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_QMJ">清明节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_LDJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_LDJ">劳动节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_DWJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_DWJ">端午节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_ZQJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_ZQJ">中秋节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
					<div class="s2_2" id="FESTIVAL_GQJ">
						<div class="s2_21 fl">
							<a class="example3 jieri" data-code="FESTIVAL_GQJ">国庆节</a>
						</div>
						<div class="s2_22 fl tishiyu"></div>
						<div class="s2_23 fl tanchukuang"></div>
						<div class="s2_24 fl beizhu"></div>
					</div>
				</div>
	        </tr>
	        
	        <!-- 产品列表开始 -->
	        <tr>			
				<!--弹窗3-->
				<div id="LoginBox3">
					<div class="row1">
						节假日贴现提示
						<a href="javascript:void(0)" title="关闭窗口" class="close_btn" id="closeBtn">
							×
						</a>
					</div>
					<form id="holidayTips" method="post" action="../tiexian/add/">
						<input type="hidden" class="id" name="id" value="">
						<input type="hidden" class="code" name="code" value="">
						<input type="hidden" class="pageName" name="pageName" value="holidayEdit"/>
						<div class="demo3" style="margin-top: 10px;">
							<ul class="inline">
								<li style="font-size:16px;float:left;width:80px;margin-left:30px;">
									<span style="margin-top: 10px;">开始日：</span>
								</li>
								<li style="width:200px;margin:0 36px;float:left;">
									<input class="laydate-icon" id="start" style="width: 185px;" name="start" readonly="readonly" onclick="laydate({elem:'#start',istime:true,istoday:true,max:$('#end').val(),format: 'YYYY-MM-DD'});" value="">
								</li>
								<li style="height:5px;clear:both;">&nbsp;</li>
								<li style="font-size:16px;float:left;width:80px;margin-left:30px;">
									结束日：
								</li>
								<li style="width:200px;margin:0 36px;float:left;margin-top: 10px;margin-bottom: 10px;">
									<input class="laydate-icon" id="end" name="end" style="width: 185px;" readonly="readonly" onclick="laydate({elem:'#end',istime:true,istoday:true,min:$('#start').val(),format: 'YYYY-MM-DD'});" value="">
								</li>
								<li style="height:5px;clear:both;">&nbsp;</li>
							</ul>
						</div>
						<p class="in-l fl">
							&nbsp;提示语：
						</p>
						<textarea class="in-t1 fl" id="content3" name="content" cols="28" rows="3" oninput="textCounter('content3','remLen3',30);"></textarea>
						<div class="clear"></div>
						<p class="in-tt1">
							您还可以输入:
							<input id="remLen3" name="remLen" type="text" value="30" size="15" style=" width: 70px;height: 15px;" readonly>
							个字符
						</p>
						<p class="in-l fl">
							&nbsp;弹出框：
						</p>
						<textarea class="in-t1" id="content3_" name="alert" cols="28" rows="3" oninput="textCounter('content3_','remLen3_',30);"></textarea>
						<p class="in-tt1">
							您还可以输入:
							<input id="remLen3_" name="remLen" type="text" value="50" size="15" style=" width: 70px;height: 15px;" readonly>
							个字符
						</p>
						<p class="in-l fl">
							&nbsp;备&nbsp;&nbsp;&nbsp;注：
						</p>
						<textarea class="in-t1" id="content3__" name="remark" cols="28" rows="3" oninput="textCounter('content3__','remLen3__',30);"></textarea>
						<p class="in-tt1">
							您还可以输入:
							<input id="remLen3__" name="remLen" type="text" value="50" size="15" style=" width: 70px;height: 15px;" readonly>
							个字符
						</p>
						<div class="row" style="margin-left: 45px;">
							<input type="button" onclick="save(this);" value="提交" class="loginbtn">
						</div>
					</form>
				</div>
			</div>
	    </tr>
	    <!-- 产品列表结束 -->
    
	    <!-- 一条线 -->
	    <tr>
	      <td height="40" colspan="12"><table width="100%" height="1" border="0" cellpadding="0" cellspacing="0" bgcolor="#CCCCCC">
	        </table></td>
	    </tr>
	    <tr >
	      <td height="30px"></td>
	    </tr>
    
	    <tr>
	      <td width="2%">&nbsp;</td>
	      <td width="51%" class="left_txt"><img src="../images/sctg/icon_mail.gif" width="16" height="11"> 客户服务邮箱：ryfinance@ryfinance.com<br />
	        <img src="../images/sctg/icon_phone.gif" width="17" height="14"> 官方网站：<a href="https://www.utiexian.com/" target="_blank">睿银金融服务有限公司</a></td>
	      <td>&nbsp;</td>
	      <td>&nbsp;</td>
	    </tr>
	  </table></td>
	  <td background="../images/sctg/mail_right_bg.gif">&nbsp;</td>
  </tr>
  
  <!-- 底部部分 -->
  <tr>
    <td valign="bottom" background="../images/sctg/mail_left_bg.gif"><img src="../images/sctg/buttom_left.gif" width="17" height="17" /></td>
    <td background="../images/sctg/buttom_bgs.gif"><img src="../images/sctg/buttom_bgs.gif" width="17" height="17"></td>
    <td valign="bottom" background="../images/sctg/mail_right_bg.gif"><img src="../images/sctg/buttom_right.gif" width="16" height="17" /></td>
  </tr>
</table>
<tr style="height:10px;">
  <td>&nbsp;</td>
</tr>

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="..//commons/scripts/jquery-1.10.1.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="../commons/scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="../commons/scripts/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="../commons/scripts/locales/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>
<script type="text/javascript" src="../js/laydate.js"></script>
<script src="../commons/scripts/ajaxupload.js"></script>
<!-- 上传组件Uploadify -->
<script src="../commons/scripts/jquery.uploadify.js"></script>
<script type="text/javascript">
	$(function ($) {			//弹窗
		$("#searchYear").bind("click", searchYear);
		searchYear();
		//节假日弹出窗口
		$(".example3").hover(function () {
			$(this).stop().animate({
				opacity: '1'
			}, 600);
		}, function () {
			$(this).stop().animate({
				opacity: '0.6'
			}, 1000);
		}).on('click', function () {
			$("body").append("<div id='mask'></div>");
			$("#mask").addClass("mask").fadeIn("slow");
			$("#LoginBox3").find(".id").val($(this).attr("data-id"));
			$("#LoginBox3").find(".code").val($(this).attr("data-code"));
			$("#LoginBox3").find("#content3").val($(this).attr("data-content"));
			$("#LoginBox3").find("#content3_").val($(this).attr("data-alert"));
			$("#LoginBox3").find("#content3__").val($(this).attr("data-remark"));
			
			var a = $(this).attr("data-start");
			if(a!=null && a!= ""){
				var strs = a.split(" ");
				if(strs.length>1)a = strs[0];
			}
			$("#LoginBox3").find("#start").val(a);
			
			var b = $(this).attr("data-end");
			if(b!=null && b!= ""){
				var strs = b.split(" ");
				if(strs.length>1)b = strs[0];
			}else{
				b = a;
			}
			$("#LoginBox3").find("#end").val(b);
			
			$("#LoginBox3").fadeIn("slow");
			textCounter('content3','remLen3',30);
			textCounter('content3_','remLen3_',30);
			textCounter('content3__','remLen3__',30);
		});
		//按钮的透明度
		$("#loginbtn").hover(function () {
			$(this).stop().animate({
				opacity: '1'
			}, 600);
		}, function () {
			$(this).stop().animate({
				opacity: '0.8'
			}, 1000);
		});
		//关闭
		$(".close_btn").hover(function () { $(this).css({ color: 'black' }) }, function () { $(this).css({ color: '#999' }) }).on('click', function () {
			$("#LoginBox1,#LoginBox2,#LoginBox3").fadeOut("fast");
			$("#mask").css({ display: 'none' });
		});
	});
	
	//点击搜索查询节日信息
	function searchYear() {
		var year = $("#startYear").val();
		if (year == "") {
			var myDate = new Date();
			$("#startYear").val(myDate.getFullYear());
		}
		$.ajax({
			url: '../tiexian/findByYeay',
			type: 'POST',
			data: {'year': year},
			dataType: 'json',
			success: function(result){
				var data = eval(result);
				if (data.state == "success") {
					var noticeList = data.noticeList;
					if (noticeList != null){
						$(".s2_22, .s2_23, .s2_24, .s2_25").html("");
						$(".example3").attr("data-id", "").attr("data-content", "").attr("data-alert", "")
							   .attr("data-remark", "").attr("data-start", "").attr("data-end", "");
						for(var i in noticeList) {
							var notice = noticeList[i];
							if (notice.code == "FESTIVAL_YD") {
								setContent(notice, "FESTIVAL_YD");
							} else if(notice.code == "FESTIVAL_CJ") {
								setContent(notice, "FESTIVAL_CJ");
							} else if(notice.code == "FESTIVAL_QMJ") {
								setContent(notice, "FESTIVAL_QMJ");
							} else if(notice.code == "FESTIVAL_LDJ") {
								setContent(notice, "FESTIVAL_LDJ");
							} else if(notice.code == "FESTIVAL_DWJ") {
								setContent(notice, "FESTIVAL_DWJ");
							} else if(notice.code == "FESTIVAL_ZQJ") {
								setContent(notice, "FESTIVAL_ZQJ");
							} else if(notice.code == "FESTIVAL_GQJ") {
								setContent(notice, "FESTIVAL_GQJ");
							}
						}
					}
				}
			}
		});
	}
	
	//notice:数据, id:节日代表的code
	function setContent(notice, id) {
		var noticeId = notice.id != null ? notice.id : "";
		var content = notice.content != "" ? notice.content : "";
		var alert = notice.alert != "" ? notice.alert : "";
		var remark = notice.remark != "" ? notice.remark : "";
		var startDate = notice.startDate != "" ? notice.startDate : "";
		var endDate = notice.endDate != "" ? notice.endDate : "";
		
		$("#" + id + " .jieri").attr("data-id", noticeId).attr("data-content", content).attr("data-alert", alert)
							   .attr("data-remark", remark).attr("data-start", startDate).attr("data-end", endDate);
		$("#" + id + " .tishiyu").html(content);
		$("#" + id + " .tanchukuang").html(alert);
		$("#" + id + " .beizhu").html(remark);
	}
	
	//多行输入
	function textCounter(field, countfield, maxlimit) {
		if ($("#"+field).val().length > maxlimit) { 
			$("#"+field).val($("#"+field).val().substring(0, maxlimit));  
		} else {
			$("#"+countfield).val(maxlimit - $("#"+field).val().length);
		}  
	}
	
	function save(){
		var holidayTips = $("#holidayTips");
		var start = $("#start").val();
		var end = $("#end").val();
		if(start==null || start==""){
			alert("请输入开始时间");
			return false;
		}
		if(end==null && end==""){
			alert("请输入截止时间");
			return false;
		}
		holidayTips.submit();
	}
</script>
</body>
</html>