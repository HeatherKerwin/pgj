<ion-header mode="ios">
  <ion-navbar color="saapp" mode="ios" style="padding-top: 4px;min-height: 56px">
    <ion-buttons style="margin-left:-25px;float:left">
      <button ion-button icon-only>
        <ion-icon color="dark" name="ios-arrow-back"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>
      修改资料
    </ion-title>
  </ion-navbar>

</ion-header>

<ion-content style="background-color:#F5F5F5;">
  <ion-list>
    <ion-item style="border-top: 0">
      <ion-label (tap)="Arrow()">
        企业法人营业执照
      </ion-label>
      <ion-note item-end>
        <button style="background-color: #ffffff;">
          <img src="assets/images/openaccount/jiantou.png" (tap)="Arrow()" style="height:20px;" *ngIf="enterprises"/>
          <img src="assets/images/openaccount/jiantoushang.png" (tap)="Arrow()" style="height:20px;" *ngIf="!enterprises"/>
        </button>
      </ion-note>
    </ion-item>

    <div *ngIf="enterprise">

      <ion-item style="background-color: #F4F4F4;">
        <ion-label>
          公司名称
        </ion-label>
        <ion-input type="text" maxlength="100" text-right placeholder="请输入公司名称" [(ngModel)]="jdData.blicCompanyName"></ion-input>
      </ion-item>

      <ion-item *ngIf="jdData.blicCardType=='USC'" style="background-color: #F4F4F4;">
        <ion-label>
          统一社会信用代码
        </ion-label>
        <ion-input type="text" maxlength="18" text-right placeholder="请输入统一社会信用代码"
                   [(ngModel)]="jdData.blicUscc"></ion-input>
      </ion-item>

      <ion-item *ngIf="jdData.blicCardType=='OCI'" style="background-color: #F4F4F4;">
        <ion-label>
          注册号
        </ion-label>
        <ion-input type="text" maxlength="50" text-right placeholder="请输入注册号"
                   [(ngModel)]="jdData.blicCardNo"></ion-input>
      </ion-item>

      <ion-item *ngIf="jdData.blicCardType=='OCI'" style="background-color: #F4F4F4;">
        <ion-label>
          税字号
        </ion-label>
        <ion-input type="text" maxlength="64" text-right placeholder="请输入税字号"
                   [(ngModel)]="jdData.blicObaCardNo"></ion-input>
      </ion-item>

      <ion-item *ngIf="jdData.blicCardType=='OCI'" style="background-color: #F4F4F4;">
        <ion-label>
          组织机构代码
        </ion-label>
        <ion-input type="text" maxlength="10" text-right placeholder="请输入组织机构代码"
                   [(ngModel)]="jdData.blicTrcCardNo"></ion-input>
      </ion-item>

      <ion-item class="border0" style="background-color: #F4F4F4;">
        <ion-label>住所</ion-label>
        <ion-select [(ngModel)]="province" (ionChange)="querycity()" interface="popover" doneText="确定" cancelText="取消">
          <ion-option value="请选择省">请选择省</ion-option>
          <ion-option *ngFor="let item of provincelist" value="{{item.name}}">{{item.name}}</ion-option>
        </ion-select>
        <ion-select [(ngModel)]="city" placeholder="{{jdData.blicCity}}" interface="popover" doneText="确定" cancelText="取消">
          <ion-option value="请选择市">请选择市</ion-option>
          <ion-option *ngFor="let item of citylist" value="{{item.name}}">{{item.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item style="background-color: #F4F4F4;">
        <ion-label></ion-label>
        <ion-input type="text" maxlength="500" text-right placeholder="请输入具体门牌号" [(ngModel)]="jdData.blicAddress"></ion-input>
      </ion-item>

      <ion-item style="background-color: #F4F4F4;">
        <ion-label>
          经营范围
        </ion-label>
        <ion-input type="text" maxlength="800" text-right placeholder="请输入经营范围" [(ngModel)]="jdData.blicScope"></ion-input>
      </ion-item>

      <ion-item style="background-color: #F4F4F4;">
        <ion-label>
          经营期限
        </ion-label>
        <ion-note style="color: #333;margin-right: 13px" item-end>
          <ion-icon style="float: left;margin-top: 2px;margin-right: 6px;">
            <img src="assets/images/jd/weixuanz.png" *ngIf="!cqterm" tappable (click)="cqterm=!cqterm;gdterm=false;"
                 style="height: 16px"/>
            <img src="assets/images/jd/xuanz.png" *ngIf="cqterm" tappable (click)="cqterm=!cqterm;gdterm=false;"
                 style="height: 16px"/>
          </ion-icon>
          长期
        </ion-note>
        <ion-note style="color: #333;" item-end>
          <ion-note style="color: #333;margin: 0;" item-end>
            <ion-icon style="float: left;margin-top: 2px;margin-right: 6px;">
              <img src="assets/images/jd/weixuanz.png" *ngIf="!gdterm" tappable (click)="gdterm=!gdterm;cqterm=false;" style="height: 16px"/>
              <img src="assets/images/jd/xuanz.png" *ngIf="gdterm" tappable (click)="gdterm=!gdterm;cqterm=false;" style="height: 16px"/>
            </ion-icon>
            固定期限
          </ion-note>
        </ion-note>
      </ion-item>
      <ion-item *ngIf="!cqterm" style="background-color: #F4F4F4;">
        <ion-label></ion-label>
        <ion-datetime displayFormat="YYYY-MM-DD" pickerFormat="YYYY-MM-DD" placeholder="请输入营业执照上的截止日期" [min]="blicTrcValidityEndmin" [max]="blicTrcValidityEndmax" [(ngModel)]="jdData.blicValidityEnd" doneText="确定"
                      cancelText="取消"></ion-datetime>
      </ion-item>
    </div>


  <ion-item>
    <ion-label (tap)="Tofinance()">
      身份证件信息
    </ion-label>
    <ion-note item-end>
      <button style="background-color: #ffffff;">
        <img src="assets/images/openaccount/jiantou.png" (tap)="Tofinance()" style="height:20px;" *ngIf="finance" />
        <img src="assets/images/openaccount/jiantoushang.png" (tap)="Tofinance()" style="height:20px;" *ngIf="!finance"/>
      </button>
    </ion-note>
  </ion-item>

  <div *ngIf="finances">
    <ion-item style="background-color: #F4F4F4;">
      <ion-label>
        法定代表人姓名
      </ion-label>
      <ion-input type="text" maxlength="16" text-right placeholder="请输入法人代表姓名" [(ngModel)]="jdData.lepName"></ion-input>
    </ion-item>
    <ion-item style="background-color: #F4F4F4;">
      <ion-label>
        身份证号
      </ion-label>
      <ion-input type="text" maxlength="18" text-right placeholder="请输入法人代表身份证号" [(ngModel)]="jdData.lepCardNo"></ion-input>
    </ion-item>

    <ion-item class="border0" style="background-color: #F4F4F4;">
      <ion-label>
        有效期至
      </ion-label>
      <ion-note style="color: #333;margin-right: 13px" item-end>
        <ion-icon style="float: left;margin-top: 2px;margin-right: 6px;">
          <img src="assets/images/jd/weixuanz.png" *ngIf="!cqtermB" (tap)="cqtermB=!cqtermB;gdtermB=false" style="height: 16px" />
          <img src="assets/images/jd/xuanz.png" *ngIf="cqtermB" (tap)="cqtermB=!cqtermB;gdtermB=false" style="height: 16px" />
        </ion-icon>
        长期</ion-note>
      <ion-note style="color: #333;" item-end>
        <ion-note style="color: #333;margin: 0;" item-end>
          <ion-icon style="float: left;margin-top: 2px;margin-right: 6px;">
            <img src="assets/images/jd/weixuanz.png" *ngIf="!gdtermB" (tap)="gdtermB=!gdtermB;cqtermB=false;" style="height: 16px"/>
            <img src="assets/images/jd/xuanz.png" *ngIf="gdtermB" (tap)="gdtermB=!gdtermB;cqtermB=false;" style="height: 16px"/>
          </ion-icon>
          固定期限</ion-note>
      </ion-note>
    </ion-item>
    <ion-item *ngIf="gdtermB" style="background-color: #F4F4F4;">
      <ion-label></ion-label>
      <ion-datetime displayFormat="YYYY-MM-DD" pickerFormat="YYYY-MM-DD" placeholder="请输入身份证上的截止日期" [min]="blicTrcValidityEndmin" [max]="blicTrcValidityEndmax" [(ngModel)]="jdData.lepValidityEnd" doneText="确定"
                    cancelText="取消"></ion-datetime>
    </ion-item>

  </div>


  <ion-item>
    <ion-label (tap)="Tobanks()">
      银行信息
    </ion-label>
    <ion-note item-end>
      <button style="background-color: #ffffff;">
        <img src="assets/images/openaccount/jiantou.png" (tap)="Tobanks()" style="height:20px;" *ngIf="bankinfo" />
        <img src="assets/images/openaccount/jiantoushang.png" (tap)="Tobanks()" style="height:20px;" *ngIf="!bankinfo"/>
      </button>
    </ion-note>
  </ion-item>

  <div *ngIf="bankinfos">
    <ion-item style="background-color: #F4F4F4;">
      <ion-label>
        开户行
      </ion-label>
      <ion-select [(ngModel)]="bankinfoData" (ionChange)="kaihuhang()"  interface="popover" doneText="确定" cancelText="取消">
        <ion-option value="请选择开户行">请选择开户行</ion-option>
        <ion-option *ngFor="let item of bankinfolist" value="{{item.bankCode}}">{{item.bankName}}</ion-option>
      </ion-select>
    </ion-item>

    <ion-item style="background-color: #F4F4F4;">
      <ion-label>开户支行信息</ion-label>
      <ion-note item-end tappable (click)="xuanz1()" style="color: #333;margin-right: 0;width: 50%;display: -webkit-box !important;-webkit-box-orient: vertical !important;-webkit-line-clamp: 2 !important;overflow: hidden !important;text-align: right;">{{jdData.occBankChildCode}} {{jdData.occBankChildName}}</ion-note>
      <ion-note mode="ios" class="Noteicon" item-end tappable (click)="xuanz1()"><ion-icon name="md-arrow-dropdown"></ion-icon></ion-note>
    </ion-item>

    <ion-item style="background-color: #F4F4F4;">
      <ion-label>
        账号
      </ion-label>
      <ion-input type="tel" maxlength="27" text-right placeholder="请输入绑定的银行卡" [(ngModel)]="jdData.occBankAccount"></ion-input>
    </ion-item>
  </div>

  </ion-list>

  <div padding>
    <button ion-button mode="ios" block color="primary" (tap)="Appraisal()">保存修改</button>
  </div>
</ion-content>


<!--上传图片弹出层-->
<div *ngIf="isMask" (click)="backdropclick($event)" ontouchmove="event.preventDefault();event.stopPropagation();">
  <ion-backdrop disable-activated role="presentation" tappable class="mask">
    <!--确认-->
    <div class="maskConB">
      <div class="offer">
        <button mode="ios" class="close" data-tap-disabled="true" (click)="Distinguish =false;isMask = false;"></button>
        <ion-list style="padding: 10px" text-center no-lines>
          <ion-row>
            <ion-col col-4>
              <button class="buttxt"  data-tap-disabled="true" (click)="xz=1">{{xz1}}</button>
            </ion-col>
            <ion-col col-4>
              <button class="buttxt"  data-tap-disabled="true" (click)="xuanz2()">{{xz2}}</button>
            </ion-col>
            <ion-col col-4>
              <button class="buttxt"  data-tap-disabled="true" (click)="xuanz3()">{{xz3}}</button>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="xz==1" class="butgird">
            <ion-col style="padding-top: 0;" *ngFor="let item of provincelist" data-tap-disabled="true" (click)="querycitys(item.provinceCode);xz1=item.provinceName;" col-auto>
              <button class="buttxtB" >{{item.provinceName}}</button>
            </ion-col>
          </ion-row>

          <ion-row *ngIf="xz==2" class="butgird">
            <ion-col style="padding-top: 0;" *ngFor="let item of citylist" data-tap-disabled="true" (click)="xz2=item.cityName;cityCode=item.cityCode;xz=3;querybankcnapsinfo();" col-auto>
              <button class="buttxtB" >{{item.cityName}}</button>
            </ion-col>
          </ion-row>

          <ion-input *ngIf="xz==3" type="text" maxlength="50" class="butinput" placeholder="请输入支行关键字" text-left [(ngModel)]="banktxt"></ion-input>
          <img (tap)="draftcalculatesave()" src="assets/images/manage/sousuo.png" style="height: 18px;position: absolute;right: 11%;margin-top: 20px;z-index: 99"/>
          <ion-row *ngIf="xz==3" class="butgird">
            <div style="height: 35px"></div>
            <ion-col style="padding-top: 0;" *ngFor="let item of banklist" tappable (click)="jd.occBankChildName=item.bankCnapsName;jd.occBankChildCode=item.bankCnapsCode;isMask=false;" col-auto>
              <button class="buttxtB" >{{item.bankCnapsName}}</button>
            </ion-col>
          </ion-row>
        </ion-list>
      </div>
    </div>
  </ion-backdrop>
</div>
